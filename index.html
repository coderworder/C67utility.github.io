<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C67 | Utility</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background-color: #0b0b0b;
    color: #e0e0e0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}
.container {
    background-color: #121212;
    width: 90%;
    max-width: 600px;
    border-radius: 12px;
    padding: 25px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
h1 { text-align: center; margin: 0; font-size: 28px; font-weight: 600; }
.tabs { display: flex; gap: 10px; justify-content: center; }
.tab { padding: 10px 20px; cursor: pointer; border-radius: 8px; border: 1px solid #444; background-color: #1e1e1e; transition: 0.2s; font-weight: 500; }
.tab.active { background-color: #2b2b2b; border: 1px solid #666; }
.tab-content { display: none; flex-direction: column; gap: 10px; }
.tab-content.active { display: flex; }
input[type=text], input[type=number] {
    padding: 12px;
    border-radius: 6px;
    border: 1px solid #444;
    background-color: #1e1e1e;
    color: #e0e0e0;
    font-size: 16px;
}
input:focus { outline: none; border-color: #888; }
button { padding: 12px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; }
button.green { background-color: #3a7d44; color: #e0e0e0; }
button.red { background-color: #8c2c2c; color: #e0e0e0; }
button:hover { opacity: 0.85; }
#logs { background-color: #1e1e1e; border-radius: 6px; padding: 10px; font-size: 14px; max-height: 300px; overflow-y: auto; white-space: pre-wrap; }
.log-success { color: #88c070; }
.log-fail { color: #c07070; }
.log-rate { color: #d4b95b; }
#progress-container { width: 100%; height: 12px; background-color: #1a1a1a; border-radius: 6px; overflow: hidden; margin-top: 5px; }
#progress-bar { width: 0%; height: 100%; background-color: #88c070; transition: width 0.2s ease; }
.multiplier { display: flex; gap: 10px; }
.multiplier label { display: flex; align-items: center; gap: 5px; font-size: 14px; }
</style>
</head>
<body>
<div class="container">
<h1>C67 | Utility</h1>
<div class="tabs">
    <div class="tab active" onclick="openTab('spammer')">Spammer</div>
    <div class="tab" onclick="openTab('deletion')">Deletion</div>
    <div class="tab" onclick="openTab('logs')">Logs</div>
</div>
<div id="spammer" class="tab-content active">
    <input type="text" id="webhookUrl" placeholder="Webhook URL">
    <input type="text" id="spamMessage" placeholder="Message to send">
    <input type="number" id="spamCount" placeholder="Message count (1-1000)" min="1" max="1000">
    <input type="number" id="spamDelay" placeholder="Delay in ms (default 2000)" min="0">

    <div class="multiplier">
        <label><input type="radio" name="multiplier" value="1" checked> Normal</label>
        <label><input type="radio" name="multiplier" value="2"> Double</label>
        <label><input type="radio" name="multiplier" value="3"> Triple</label>
        <label><input type="radio" name="multiplier" value="4"> Quadruple</label>
    </div>
    <div class="cf-turnstile" data-sitekey="0x4AAAAAAB1JB_PrO-EITvfV"></div>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <button class="green" onclick="spamWebhook()">Start Spamming</button>
    <div id="progress-container"><div id="progress-bar"></div></div>
</div>
<div id="deletion" class="tab-content">
    <input type="text" id="deleteWebhookUrl" placeholder="Webhook URL">
    <div class="cf-turnstile" data-sitekey="0x4AAAAAAB1JB_PrO-EITvfV"></div>
    <button class="red" onclick="deleteWebhook()">Delete Webhook</button>
</div>
<div id="logs" class="tab-content"><div id="logs"></div></div>
</div>
<script>
let globalLogs = [];
function addLog(message,type='success'){
    const logsDiv=document.getElementById('logs');
    let span=`<span class="log-${type}">${message}</span>`;
    globalLogs.push(span);
    logsDiv.innerHTML=globalLogs.join('<br>');
    logsDiv.scrollTop=logsDiv.scrollHeight;
}
function openTab(tabName){
    document.querySelectorAll('.tab-content').forEach(tc=>tc.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById('progress-bar').style.width='0%';
}
async function spamWebhook(){
    const url=document.getElementById('webhookUrl').value.trim();
    const message=document.getElementById('spamMessage').value||'Default message';
    const count=parseInt(document.getElementById('spamCount').value)||1;
    const delay=parseInt(document.getElementById('spamDelay').value)||2000;
    const multiplier=parseInt(document.querySelector('input[name="multiplier"]:checked').value);
    const token=document.querySelector('[name="cf-turnstile-response"]').value;
    const progress=document.getElementById('progress-bar');
    if(!token) return addLog('Please complete Turnstile check!','fail');
    if(!url.startsWith('https://discord.com/api/webhooks/')) return addLog('Invalid webhook URL.','fail');
    progress.style.width='0%';
    for(let i=0;i<count;i++){
        try{
            const res=await fetch('/api/spam',{
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body:JSON.stringify({url,message,repeat:multiplier,delay,token})
            });

            let data;
            try{data=await res.json()}catch{return addLog('Server did not return valid JSON','fail')}

            if(!res.ok){
                addLog(`Failed at message ${i+1}: ${data.error}`,'fail');
                return;
            }

            addLog(`Sent message ${i+1}/${count} (${multiplier}x)`,'success');
            progress.style.width=`${((i+1)/count)*100}%`;

            await new Promise(r=>setTimeout(r,delay));
        }catch(e){addLog(`Error: ${e.message}`,'fail'); return;}
    }
    addLog('Spamming complete!','success');
}
async function deleteWebhook(){
    const url=document.getElementById('deleteWebhookUrl').value.trim();
    const token=document.querySelectorAll('[name="cf-turnstile-response"]')[1].value;

    if(!token) return addLog('Please complete Turnstile check!','fail');
    if(!url.startsWith('https://discord.com/api/webhooks/')) return addLog('Invalid webhook URL.','fail');

    try{
        const res=await fetch('/api/delete',{
            method:'DELETE',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({url,token})
        });

        let data;
        try{data=await res.json()}catch{return addLog('Server did not return valid JSON','fail')}

        if(!res.ok) return addLog(`Failed to delete: ${data.error}`,'fail');
        addLog('Webhook deleted successfully.','fail');
    }catch(e){addLog(`Error: ${e.message}`,'fail');}
}
</script>
</body>
</html>
